<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ§ THE PERMANENT SCRAPBOOK âœ§</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <style>
        :root { --bg: #0d0d0d; --accent: #bfff00; --secondary: #ff00ff; --card-bg: #1a1a1a; --text: #ffffff; --font: 'VT323', monospace; }
        body.kawaii-mode { --bg: #fff0f5; --accent: #ff69b4; --secondary: #87ceeb; --card-bg: #ffffff; --text: #4b0082; }
        body { background: var(--bg); color: var(--text); font-family: var(--font); padding: 20px; transition: 0.3s; }
        #bio-header { border: 3px double var(--accent); padding: 20px; text-align: center; margin-bottom: 20px; background: var(--card-bg); }
        #scrapbook-content { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .project-card { width: 100%; max-width: 380px; background: var(--card-bg); border: 3px solid var(--secondary); padding: 15px; box-shadow: 10px 10px 0px var(--accent); position: relative; }
        .btn { width: 100%; background: var(--accent); color: #000; padding: 12px; margin: 5px 0; font-family: var(--font); font-size: 1.2rem; cursor: pointer; border: none; font-weight: bold; }
        input { width: 100%; background: #000; border: 1px solid var(--accent); color: var(--accent); padding: 10px; margin: 5px 0; box-sizing: border-box; font-family: var(--font); }
        .hidden { display: none; }
        .nav-menu { text-align: center; font-size: 1.5rem; margin: 20px 0; }
        .nav-item { cursor: pointer; margin: 0 10px; color: var(--accent); }
    </style>
</head>
<body>

    <div id="bio-header">
        <h1 style="color:var(--secondary); font-size: 3rem; margin:0;">2026 LOG</h1>
        <div id="stat-box">PROJECTS: <span id="count-num">0</span></div>
    </div>

    <div class="nav-menu">
        <span class="nav-item" onclick="showView('journal')">âœ¦ VIEW JOURNAL</span> | 
        <span class="nav-item" onclick="showView('add')">âœ¦ ADD NEW</span>
    </div>

    <div id="add-view" class="hidden">
        <div style="max-width:500px; margin:auto; border:3px solid var(--secondary); padding:25px; background:var(--card-bg);">
            <h2 style="color:var(--accent)">> NEW ENTRY (TEXT ONLY)</h2>
            <input type="text" id="name" placeholder="Project Name">
            <input type="text" id="hook" placeholder="Hook Size">
            <input type="text" id="yarn" placeholder="Yarn Brand">
            <input type="text" id="stitches" placeholder="Stitches Used">
            <input type="url" id="tutorial" placeholder="Tutorial Link">
            <button class="btn" id="save-btn" onclick="saveToFirebase()">SAVE TO DATABASE ðŸ’¾</button>
        </div>
    </div>

    <div id="journal-view">
        <div id="scrapbook-content"></div>
    </div>

    <script>
        // YOUR NEW CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyDzzyFtT6viYm7h80diX1dZB5QDKihdtoE",
            authDomain: "crochet-journal-1aaa6.firebaseapp.com",
            projectId: "crochet-journal-1aaa6",
            storageBucket: "crochet-journal-1aaa6.firebasestorage.app",
            messagingSenderId: "915192079433",
            appId: "1:915192079433:web:f7e58423837f5e3a290b98"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function showView(v) {
            document.getElementById('add-view').classList.toggle('hidden', v !== 'add');
            document.getElementById('journal-view').classList.toggle('hidden', v !== 'journal');
        }

        async function saveToFirebase() {
            const btn = document.getElementById('save-btn');
            btn.innerText = "SAVING...";
            btn.disabled = true;

            try {
                await db.collection("projects").add({
                    name: document.getElementById('name').value || "Unnamed Project",
                    hook: document.getElementById('hook').value || "N/A",
                    yarn: document.getElementById('yarn').value || "N/A",
                    stitches: document.getElementById('stitches').value || "N/A",
                    tutorial: document.getElementById('tutorial').value || "",
                    date: new Date().toISOString()
                });

                alert("âœ¦ SUCCESS: MEMORY SAVED âœ¦");
                showView('journal');
                btn.innerText = "SAVE TO DATABASE ðŸ’¾";
                btn.disabled = false;
            } catch (e) {
                console.error(e);
                alert("ERROR: Could not connect to Database. Did you set Rules to TRUE?");
                btn.disabled = false;
            }
        }

        function loadData() {
            db.collection("projects").orderBy("date", "desc").onSnapshot(snap => {
                const cont = document.getElementById('scrapbook-content');
                cont.innerHTML = '';
                document.getElementById('count-num').innerText = snap.size;
                snap.forEach(doc => {
                    const p = doc.data();
                    cont.innerHTML += `
                        <div class="project-card">
                            <h2 style="color:var(--accent);">${p.name}</h2>
                            <p><b>HOOK:</b> ${p.hook} | <b>YARN:</b> ${p.yarn}</p>
                            <p><b>STITCHES:</b> ${p.stitches}</p>
                            ${p.tutorial ? `<a href="${p.tutorial}" target="_blank" style="color:var(--secondary)">[SOURCE_LINK]</a>` : ''}
                        </div>`;
                });
            });
        }
        loadData();
    </script>
</body>
</html>
